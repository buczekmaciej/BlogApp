{% extends "app/index.html.twig" %}

{% block addition %}
	Post - #{{article.id}}
{% endblock %}

{% block stylesheets %}
	<link href="/styles/post.css" rel="stylesheet">
{% endblock %}

{% block content %}
	<section class="article-org">
		<div class="article-specs">
			<p class="article-title">
				{{article.Title}}
			</p>
			<a href="" class="author">
				{% if article.user.details.image %}
					<img src="{{'/images/userProfile/' ~ article.user.details.image}}">
				{% else %}
					<img src="/images/defaults/logo.svg">
				{% endif %}
				<span>
					{{article.user.details.firstName}}
				</span>
			</a>
			<p class="date">
				{{article.createdAt|date('D, m d, Y H:i')}}
			</p>
			<div class="social-data">
				<div class="likes-counter">
					{% if app.user %}
						{% if app.user in article.likes %}
							<a href="">
								<img src="/images/icons/liked.svg">
							</a>
						{% else %}
							<a href="">
								<img src="/images/icons/like.svg">
							</a>
						{% endif %}
					{% else %}
						<img src="/images/icons/liked.svg">
					{% endif %}
					<p>
						{{article.likes|length}}
					</p>
				</div>
				<div class="comments-counter">
					<img src="/images/icons/comment.svg">
					<p>
						{{article.comments|length}}
					</p>
				</div>
			</div>
		</div>
		<p class="article-content">
			{{article.Content|raw}}
		</p>
		{% if article.image %}
			<img src="{{'/images/postsImages/' ~ article.image}}" class="article-image">
		{% else %}
			<img src="/images/defaults/post.svg" class="article-image">
		{% endif %}
		<div class="comments">
			<div class="own-comment">
				{% if app.user %}
					{{form_start(comment)}}
					{{form_row(comment.comment)}}
					{{form_widget(comment.submit)}}
					{{form_end(comment)}}
				{% else %}
					<p class="not-logged">
						You must be logged to comment
					</p>
				{% endif %}
			</div>
			<div class="other-comments">
				{% for comment in article.comments %}
					<div class="comment">
						<div class="about">
							<a href="" class="comment-author">
								{% if comment.User.details.image %}
									<img src="{{'/images/userProfile/' ~ comment.User.details.image}}">
								{% else %}
									<img src="/images/defaults/logo.svg">
								{% endif %}
								<span>
									{{comment.User.details.firstName}}
								</span>
							</a>
							<p class="comment-date">
								{% if comment.addedAt|date('d-m-Y') == "now"|date('d-m-Y') %}
									{{comment.addedAt|date('H:i')}}
								{% else %}
									{{comment.addedAt|date('D, m d')}}
								{% endif %}
							</p>
						</div>
						<p class="content">
							{{comment.Content}}
						</p>
					</div>
				{% else %}
					<p class="no-comments">
						Seems like this post wasn't commented yet.
						{% if app.user %}
							Go ahead and leave your comment!
						{% else %}
							<a href="{{path('userLogin')}}">
								Login
							</a>
							and leave your comment
						{% endif %}
					</p>
				{% endfor %}
			</div>
		</div>
	</section>
{% endblock %}
