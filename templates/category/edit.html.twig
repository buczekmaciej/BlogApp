{% extends "defaults/_nav.html.twig" %}

{% block title %}
	Edit category
{% endblock %}

{% block stylesheets %}
	{{ parent() }}
	<link rel="stylesheet" href="/styles/app/category/form.css">
{% endblock %}

{% block content %}
	{{ form_start(form) }}
	<div class="form-box">
		{{ form_label(form.name) }}
		{{ form_widget(form.name) }}
	</div>
	<div class="form-box">
		{{ form_label(form.tags) }}
		<div class="tags-container">
			{% for tag in form.tags %}
				{% set checked = false %}
				{% set index = loop.index %}
				{% for t in oldTags %}
					{% if t.name == form.children.tags.children[index].vars.label %}
						{% set checked = true %}
					{% endif %}
				{% endfor %}
				<div class="tag-box">
					{{form_widget(tag, {'attr': {'checked': checked}})}}
					{{form_label(tag)}}
				</div>
			{% endfor %}
		</div>
	</div>
	{{ form_widget(form.submit) }}
	{{ form_widget(form._token) }}
	{% if error %}
		<div class="alert-danger">{{ error }}</div>
	{% endif %}
	{{ form_end(form, {'render_rest': false}) }}
{% endblock %}

{% block create %}
	{% if app.user and "ROLE_ADMIN" in app.user.roles %}
		<a href="" class="admin-create-btn">
			<svg class="plus-icon" stroke="currentColor" fill="currentColor" stroke-width="0" viewbox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
				<path fill-rule="evenodd" d="M8 3.5a.5.5 0 01.5.5v4a.5.5 0 01-.5.5H4a.5.5 0 010-1h3.5V4a.5.5 0 01.5-.5z" clip-rule="evenodd"></path>
				<path fill-rule="evenodd" d="M7.5 8a.5.5 0 01.5-.5h4a.5.5 0 010 1H8.5V12a.5.5 0 01-1 0V8z" clip-rule="evenodd"></path>
			</svg>
			Create new category
		</a>
	{% endif %}
{% endblock %}
